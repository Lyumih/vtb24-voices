<!DOCTYPE html>
<html lang="ru">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <title>–í–¢–ë. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</title>
  </head>

  <body>
    <!-- HEADER -->
    <div id="app" class="container-fluid">
      <nav class="navbar row sticky-top navbar-dark bg-primary">
        <a class="navbar-brand ml-5" href="#!">–í–¢–ë. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</a>
      </nav>

      <!-- STATISTICS -->
      <div class="row my-4">
        <div class="col-4 text-center">
          <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ myUser.username }}</h3>
        </div>
        <div class="col-4 text-center">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏<br />13 –º–∏–Ω.</div>
        <div class="col-4">
          <div>–û—Ç–≤–µ—á–µ–Ω–æ: 7 –∏–∑ 15</div>
          <div class="progress">
            <div
              class="progress-bar bg-success"
              role="progressbar"
              style="width: 15%"
              aria-valuenow="15"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              1
            </div>
            <div
              class="progress-bar bg-danger"
              role="progressbar"
              style="width: 30%"
              aria-valuenow="30"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              2
            </div>
            <div
              class="progress-bar bg-warning"
              role="progressbar"
              style="width: 20%"
              aria-valuenow="20"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              5
            </div>
          </div>
        </div>
      </div>

      <!-- QUIZ AND CHATS -->
      <div class="row">
        <!-- QUIZ TAB -->
        <div class="col-6">
          <ul
            class="nav nav-tabs nav-fill mb-3"
            id="quiz-result-tab"
            role="tablist"
          >
            <li class="nav-item">
              <a
                class="nav-link active"
                href="#quiz"
                id="quiz-tab"
                data-toggle="tab"
                role="tab"
                aria-controls="quiz"
                aria-selected="true"
                >–í–æ–ø—Ä–æ—Å—ã</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#result"
                id="result-tab"
                data-toggle="tab"
                role="tab"
                aria-controls="contact"
                aria-selected="false"
                >–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è</a
              >
            </li>
          </ul>
          <div class="tab-content" id="quize-result-content">
            <div
              class="tab-pane fade show active"
              role="tabpanel"
              id="quiz"
              aria-labelledby="quiz-tab"
            >
              <!-- QUIZ üî• -->
              <div
                id="accordion"
                role="tablist"
                style="max-height: 60vh; overflow:auto;"
              >
                <div
                  class="card mx-2 shadow-sm m-3"
                  v-for="(quiz, index) in quizzes"
                  @mouseover="selectedQuiz=quiz.id"
                  onmouseover="if (document.getElementById('answer-tab').getAttribute('aria-selected') !== 'true') document.getElementById('answer-tab').click()"
                >
                  <div
                    class="card-header"
                    :class="myVotes[index] === 'yes' ? 'bg-success ' : (myVotes[index] === 'no' ? 'bg-danger' : (myVotes[index] === 'quite' ? 'bg-warning' : ''))"
                    role="tab"
                    :id="'quiz-heading-'+index"
                  >
                    <h5 class="mb-0">
                      <a
                        data-toggle="collapse"
                        :href="'#quiz-'+index"
                        aria-expanded="true"
                        :aria-controls="'quiz-'+index"
                        >‚Ññ{{ quiz.id }} üî• {{ quiz.text }}
                      </a>
                    </h5>
                  </div>
                  <div
                    :id="'quiz-'+index"
                    class="collapse show"
                    role="tabpanel"
                    :aria-labelledby="'quiz-heading-'+index"
                  >
                    <!-- TODO: –°–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç–∏–ª -->
                    <div class="card-body">
                      <div class="row">
                        <div class="col-4">
                          <button
                            class="btn btn-block"
                            :disabled="!(myVotes[index] == 'new' || myVotes[index] == 'empty')"
                            :class="myVotes[index] === 'yes' ? 'btn-success ' : 'btn-outline-success'"
                            @click="makeVote(quiz.id,myUser.id, 'yes')"
                          >
                            –ó–ê
                          </button>
                        </div>
                        <div class="col-4">
                          <button
                            class="btn btn-block"
                            :disabled="!(myVotes[index] == 'new' || myVotes[index] == 'empty')"
                            :class="(myVotes[index] === 'no') ? 'btn-danger ' : 'btn-outline-danger'"
                            @click="makeVote(quiz.id, myUser.id, 'no')"
                          >
                            –ü–†–û–¢–ò–í
                          </button>
                        </div>
                        <div class="col-4">
                          <button
                            class="btn btn-block"
                            :disabled="!(myVotes[index] == 'new' || myVotes[index] == 'empty')"
                            :class="myVotes[index] === 'quite' ? 'btn-warning ' : 'btn-outline-warning'"
                            @click="makeVote(quiz.id,myUser.id, 'quite')"
                          >
                            –í–û–ó–î–ï–†–ñ–ê–õ–°–Ø
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="tab-pane"
              role="tabpanel"
              id="result"
              aria-labelledby="result-tab"
            >
              –°–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è
            </div>
          </div>
        </div>
        <!-- CHAT TAB -->
        <div class="col-6">
          <ul class="nav nav-tabs nav-justified" id="chat-answer-members-tab">
            <li class="nav-item">
              <a
                class="nav-link active"
                id="chat-tab"
                data-toggle="tab"
                href="#chat"
                role="tab"
                aria-selected="true"
                >–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link "
                id="answer-tab"
                data-toggle="tab"
                href="#answer"
                role="tab"
                aria-selected="false"
                >–û—Ç–≤–µ—Ç—ã</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link "
                id="members-tab"
                data-toggle="tab"
                href="#members"
                role="tab"
                aria-selected="false"
                >–£—á–∞—Å—Ç–Ω–∏–∫–∏</a
              >
            </li>
          </ul>
          <div class="row">
            <div class="col-12 mt-1 input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" :title="activeQuiz.text"
                  >‚Ññ{{ selectedQuiz }}</span
                >
              </div>
              <input
                type="text"
                :placeholder="'–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ –≤–æ–ø—Ä–æ–æ—Å ‚Ññ'+selectedQuiz"
                class="form-control"
              />
              <div class="input-group-append">
                <button class="btn btn-success" type="button">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
              </div>
            </div>
          </div>
          <div class="tab-content" id="chat-answer-members-content">
            <div
              class="tab-pane fade show active"
              id="chat"
              role="tabpanel"
              aria-labelledby="chat-tab"
            >
              <ul class="list-unstyled">
                <!-- TODO: –ï–°–õ–ò –ü–†–ï–î–´–î–£–©–ï–ï –û–ë–°–£–ñ–î–ï–ù–ò–ï –û–¢–ù–û–°–ò–¢–°–Ø –ö –ö–û–ù–ö–†–ï–¢–ù–û–ú–£ –í–û–ü–†–û–°–£, –¢–û –ù–ï –ù–ê–î–û –î–ï–õ–ê–¢–¨ –û–¢–°–¢–£–ü–´ -->
                <li
                  v-for="answer in allAnswers"
                  class="media p-3 shadow my-3"
                  @mouseover="selectedQuiz = answer.answer.quizId"
                  onclick="document.getElementById('answer-tab').click()"
                >
                  <img
                    src="icons/avatar.png"
                    class="rounded-circle shadow-sm mr-3"
                    style="max-width: 50%"
                    alt="avatar-1"
                  />
                  <div class="media-body" :title="answer.quiz.text">
                    <h5
                      class=" mt-0 mb-1 d-inline-block text-truncate"
                      style="max-width: 35vw;"
                    >
                      {{ answer.user.username }}. ‚Ññ{{ answer.answer.quizId }}
                      {{ answer.quiz.text }}
                      –Ω–µ–ª—å–∑—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å.
                    </h5>
                    <p>
                      {{ answer.answer.text }}
                    </p>
                  </div>
                </li>
              </ul>
            </div>
            <div
              class="tab-pane"
              id="answer"
              role="tabpanel"
              aria-labelledby="answer-tab"
            >
              <ul class="list-unstyled">
                <!-- TODO: –ï–°–õ–ò –ü–†–ï–î–´–î–£–©–ï–ï –û–ë–°–£–ñ–î–ï–ù–ò–ï –û–¢–ù–û–°–ò–¢–°–Ø –ö –ö–û–ù–ö–†–ï–¢–ù–û–ú–£ –í–û–ü–†–û–°–£, –¢–û –ù–ï –ù–ê–î–û –î–ï–õ–ê–¢–¨ –û–¢–°–¢–£–ü–´ -->
                <div v-if="activeAnswers.length === 0">
                  <p class="p-3 shadow">
                    –ï—â—ë –Ω–∏–∫—Ç–æ –Ω–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª –¥–∞–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –û—Å—Ç–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π
                    –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                  </p>
                </div>
                <li
                  v-for="answer in activeAnswers"
                  class="media p-3 shadow my-3"
                >
                  <img
                    src="icons/avatar.png"
                    class="rounded-circle shadow-sm mr-3"
                    style="max-width: 50%"
                    alt="avatar-1"
                  />
                  <div class="media-body" :title="answer.quiz.text">
                    <h5
                      class=" mt-0 mb-1 d-inline-block text-truncate"
                      style="max-width: 35vw;"
                    >
                      {{ answer.user.username }}. ‚Ññ{{ answer.answer.quizId }}
                      {{ answer.quiz.text }}
                      –Ω–µ–ª—å–∑—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å.
                    </h5>
                    <p>
                      {{ answer.answer.text }}
                    </p>
                  </div>
                </li>
              </ul>
            </div>
            <div
              class="tab-pane"
              id="members"
              role="tabpanel"
              aria-labelledby="members-tab"
            >
              <ul v-for="user in allUsers" class="list-unstyled">
                <!-- TODO: –ï–°–õ–ò –ü–†–ï–î–´–î–£–©–ï–ï –û–ë–°–£–ñ–î–ï–ù–ò–ï –û–¢–ù–û–°–ò–¢–°–Ø –ö –ö–û–ù–ö–†–ï–¢–ù–û–ú–£ –í–û–ü–†–û–°–£, –¢–û –ù–ï –ù–ê–î–û –î–ï–õ–ê–¢–¨ –û–¢–°–¢–£–ü–´ -->
                <li class="media p-3 shadow my-3">
                  <img
                    src="icons/avatar.png"
                    class="rounded-circle shadow-sm mr-3"
                    style="max-width: 50%"
                    alt="avatar-1"
                  />
                  <div class="media-body">
                    <h5
                      class=" mt-0 mb-1 d-inline-block text-truncate"
                      style="max-width: 35vw;"
                    >
                      {{ user.username }}
                    </h5>
                    <p>
                      –û—Ç–≤–µ—Ç–∏–ª: 7 –∏–∑ 13 –≤–æ–ø—Ä–æ—Å–æ–≤<br />
                      –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: 15 –ø–æ 5 –≤–æ–ø—Ä–æ—Å–∞–º
                    </p>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="js/vote.js"></script>
  </body>
</html>
